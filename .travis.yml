sudo: required

language: cpp

services:
- docker

env:
  global:
    - secure: "oVoGsniUAa4IEhdlgRAEZiYgz8d7R9WsynP75+X+mASztQvWq+Qg2kHdPHQjyzDvWoXkjl50yz86wJr6DlfJKx9WMYexweorRxJLRZhF4hR+nAIEEaQ7qSukMWRTkbrLWUiYYtJdMkIIjX6YtwVsCoH8zqaB35KXk8gISz6CxVfU6GdLZc73kG6eR6n13o6B0UeUZJOBpwdJxqObD15sNqCplc8SA98q/KaTWD81HyIsmvohqpWQCRYkK/cNZzbGMW8HtK9FgsGlI/s1zQlM8Z1Bbv4KhlO5SfJvoBs5D9x/Jri3OVqSUljSWfyCVFh21UuetKGbQ5PxkymnAee41rbngo2HN3zBtivR64ePUimIz+fUa9BCYQsrd2e1rCLGp6flVUpzWEleFCJpsKoRqmEunM2wE39MZNEcDNGf42GmcuaofG/D9R/V88gj7BTUA8gNLB5ORHdyCNTW1UYkO4G7+6X71NYcf/kDcsVF3wZ6kM0PcRQe/xlUJV6ILSUQEVxJdAAwdLRSNbPoggu08QnX0zYgzYBdvrsTtZO1EpnxcETVMfF/XhC6PYPcYXzhJjtCL/e1SWQc1JgiQt1KIyHsQZrZaldjw9AjpSwoSLYlmflEAcoqBd/3tTQx+6EmFPsi5EXg8TnRekkNmTjTK8/XSzIFWrnz1i6Qys2P5WA="
    - secure: "xb7eO93fZXNLmvwetCuKu2G/3UKZxJXAXNEdxuIz8kLiKworHGcvvZ9PjnYEYo0BiREREpH/XuGl12I6sSDdOpkdnpyU22wfIJPK74Gk6rELVP60u/phQKmYz9u9d5O+XAn0gOI5TT6WQHSohBx0sGQmARAKv0zDqZ/Wz0DDsg1EKymKp3sNe3KoGqKRd4F+gwVSIkYau9tSWwbSDIgUWPBxYIImIhi57SeLY3cogQ5IJayA4QPQ50zfTfgsGQ4YVvRaK5JIisqKwZ7/er3Hta/SmsU2Ehqon9QElDp1NB+yrmLmvYKY6ijsmhyPZTIn9uqKAP54rCvQBnbalDWSZl7q5qBbcbETeAoiPFetYoL8qINm8XDmPeHIRRrmt11wMq6Nj5wvsloHpFLmK0le/xXt6U1MKG8WxHqxt3DdZ4h+Px7PMiEuWsgT2wYmI/JMbDEjfq0OZKCFjHdSHSi5pXvcxZc6RH5s7LShfZ6uYHXjvG7E+evzrMgwfte45u6PTuZ+4mdiZ4I0mSfX/KFZc4/nRoUOSGxZK/aIkogQbwwozEPweMZzKO7VgylqJRYs723kFq0XOWuyvczKU6P9vQnWQFdU1CeQ2TRwoInqw2deJUaZrOmUhQKJytGFbgzb69ZIAf9WLfh/QcDA/gejRjsulbFh8ZMJnAdPauZN/wc="
    - COMMIT=${TRAVIS_COMMIT::8}
    
  matrix:
  - secure: cAqASnSt7ADpREX9UBMkmiTgBr7FWjsQsF0etkyx5NJgUhA1L4jvC7z9z1IWWxdrXPn7oFjRAa3+i4zS7hiO5TNiee8Y56lNEEhYa1plM7uOUPx3pWDoPw8OerxTSgsnFThIPsxeq9d8iY/67cSlMqa9vxZcKs+H5gkcF9WAEpNj4z4yUdQN8BhGPjXRYpk5hOXdMADeBY3TBYpdCgrgin2CRj+KMvWTMS/uQRI5wfRW4JkU3tj4kKPs9WTMP3sNBqn/zRzD3ixdRPjtC9TdmFz4VHt/A3+jJ336FIibA7/7u4N9GTgaSqPM0b9GDip5sSgntd1Nr1vUvqeJRjt7WxmtmQ+ZzOhQ/WEHN5GWFDeSmGAdjmY54zISBQ7uC7YotJnXBNf28yIxyhbb9o+wnmUR0k5J90UDVfJgmcMQriuL1gNfSlTLjSwC9OqQrUDDDJlpn7ultmHV8FPexmNZoB5A9Lse29CxjaX8Q8BLCWCRPzBj1ursD3UA5iXRiXTHx0QfpyZ4GVd4MDB1xUM8Gn6KroTP5xkWW4IT1+P2MFENvdNNGOCgz0SLpOvMRX8XNBt1PNw4W5PlwI036rDXmSVAgSugRmyv/HROJOuVHtTvwxt0DYlalBYh5RuvnkAbtER7DUOOzrCfQpYJBmai8uecuT3to4C1SED8iSx8/QI=
  - secure: 0Jni/Dhizup/19aPmQ/oLxotIdAHh7wbMWfwN80qZJcSpGKoUK1p3guNLhO5vumtNOFs9yK4ywcnew06UJ6OA6qQdGy/WqYkCTRCaCS3i9k0AXlqep7IDa3S9arJVs4OJR7M/ZQCvDedOI/2wk4jEB5j9pSCyqFe5O6A36pzG90CvBrGirhdwHQD6TxlRrPPjfMFzU2eBWUTZtRJMQwSk25y4ZNHdddKQ1w+IljJ87ZB9lpEQ/aJUKvgslt3D/dgcL5pws8H+CannDtJcSXmAjn13MjT75iSXh9B8wk0EtLPsoxVjS7RkyWNqkZpbPdSVt5bF0HofDHdu0KYCFA36mlKaYPXpcOf7qrtn1oSbKiCW0plCoIvBw01+H6BBO+e6CdwyrGnRJ4VnCBfKs02YUaMYCI2igLrHWN+et3l4jmnuOF5iubhB0/e4mCswwlVqghgaK4sYBi35imw4JsXwn/F+0R83C9jsfPaNkLqsOfxxbd2p8mE/dKn1fDDD5UQCn5lzSwjYCagQnrf0uOYlEnz9+XbxuT5WLEItu+t+WsxaPTObD76945TlrJr0sQzmubKBKWG3XIOMfaw0safHu98kOk+CPFMoMFn4eDxlm2QSgVpXfwBkDjfa0xzrab/aS/1x7WD5HS8plwOqw+KjRYz8TZprRG5gdRZKJQ07so=
  - secure: uN+ScgFuG6nauwzssGAsSxZGufgOZHmyvMwnEa9nT1J55d6tGqAvWVQEN8mO+QRXjxmxdbD02vpy0/IXF0HEdUVeC+aljKqA53ZSn0z720g1Hfkdwpn76qERliVpi+emlBxUyKYFNFEh2ZBqUhvDtS4iSYQUYz44BHkfNyx3MfjzajhTwDPRyKoSgUoo09rYXuTHrerzRDdzisRthPx3aV2HknwIIGd/ixFTYx9cbvYZyXQF5K2cYDcyeV88zCTcAj/+jPdkLQrrsVMjdWe32IU8YQaZnS5mUNFkAWugWoRqvKgH7Y36qzRTRkjbJDafXPXpvmZnboQwOuIARY0oWV9LEfa7CZoJu1MWryyMgFL59GCydM4UsxaG8E4Oj+Ym1j+YfeH4Cu2VBJ2lQn5+TThIJSuP9QvS6GpxUwDqBEyZMNHuoIr6eGkq1zEifKX8oPBAxp2hAF1fDNjmmobjKBGiiUcHHJJq0blfmkdFzZIPym6GhVIrAQEMRwUIZfRc/pZHO/FQBVYDY7J6YefDgV9rZeExAIBC3ONvrIt6b7Z+Lgpl1eLtpmnlRaRyVyLOu+lbNnCd6ooaIcOpqGDTs5pCMWg9BgHIEJM0mOEAQRUBSu9GX0CjuhLtRRq3oSXdOmFPBfLk4yNXolaOxOYVbJyLD1WBQtVzlBYwcvCklRY=

install:
- docker build -t test .

script:
- docker ps -a

after_success:
  - docker login -u $DOCKERUSERNAME -p $DOCKERPASSWORD
  - export REPO=sixonetwo/DIT168
  - export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
  - docker build -f Dockerfile -t $REPO:$COMMIT .
  - docker tag $REPO:$COMMIT $REPO:$TAG
  - docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
  - docker push $REPO

notifications:
  slack: group2dit168:ZN4T4lCBQA6x5kHHA9PROgUy

